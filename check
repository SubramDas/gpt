find_package(gtest)


	include_directories(${GTEST_INC_DIR})
# include_directories(${CMAKE_CURRENT_SOURCE_DIR}/ccfbasestub)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fno-exceptions")
set(SOURCES 
    main.cpp
    projection_types_test.cpp
    usbtypes_tests.cpp
    bluetooth_types_tests.cpp
    deviceid_tests.cpp
    bt_conn_instance_tests.cpp
    cedevice_tests.cpp
     phonedevice_tests.cpp
     btdevice_tests.cpp
     projectiondevice_tests.cpp
    networkdevice_tests.cpp
    usbdevice_tests.cpp
    mediadevice_tests.cpp
    generichostdevice_tests.cpp
    auxdevice_tests.cpp
   	types_tests.cpp
    
    #${CMAKE_CURRENT_SOURCE_DIR}/ccfbasestub/CEDeviceStub.cpp
)

add_executable(ccfbase-tests ${SOURCES})
add_dependencies(ccfbase-tests ccfbase)

set (LIBS 
    ${CMAKE_THREAD_LIBS_INIT} 
    ${CMAKE_DL_LIBS} 
    ${KIVI_CORE_LIB} 
    ${KX_FRAMEWORK_LIB}
    ${CCF_BASE_LIB}
    ccfbase
    ${GTEST_LIB}
    rt
    gtest 
    pthread
)

# message(MY LIB ${LIBS})
target_link_libraries(ccfbase-tests ${LIBS})
install (TARGETS ccfbase-tests DESTINATION usr/bin)


if(WITH_GCOV)
set(LIBS ${LIBS} gcov)
endif(WITH_GCOV)
